# Mosaic

This is a modified version of the Mosaic project originally written by Mission Bio to analyze single-cell DNA and protein data generated by the Tapestri instrument. The tool has been customized for the analysis in Zhang et al. (https://www.biorxiv.org/content/10.1101/2022.03.06.483206v1). Most importantly, the genotyping module has been customized for study of tumor samples.


## System Requirements

The software has been tested on MacOS 11.2.1 and Linux CentOS7. 

Dependencies are detailed in `conda-requirements.yml`. Some of the plotting packages might cause conflict on certain systems, and their version requirement could be relaxed, although this has not been formally tested.

## Installation

Clone this repository into your working directory with

    git clone https://github.com/haochenz96/mosaic

It is highly recommended to install all the dependencies with Conda. 

First, create a Conda environment with the configuration file `conda-requirements.yml`:

    conda env create -f conda-requirements.yml

By default, this will create a new environment called `mosaic`, which can be activated with:

    conda activate mosaic 

Install the `mosaic` package to the environment with:

    pip install -e /path/to/mosaic

Typical installation time is under 15 min on a normal desktop computer. If it takes longer, it is very likely due to some of the plotting dependencies causing conflicts and their version requirements may be relaxed.

## Install TEA (Tapestri Express Analysis)

It is highly recommended to install `TEA`, which provides a set of utility tools for analyzing Tapestri data, along with `Mosaic`.

It an be obtained by

    git clone https://github.com/haochenz96/tea.git

And installed by 

    pip install -e /path/to/tea

## Usage

A short tutorial on using Mosaic for analyzing single-cell SNV clone is provided in `mosaic_clone_analysis.ipynb`.